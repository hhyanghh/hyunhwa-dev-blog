---
title: 호이스팅과 스코프에 대한 이해와 var 사용 지양 이유
date: 2023-08-30
description: 자바스크립트의 핵심 개념인 스코프, 호이스팅, 변수 선언를 제대로 이해하기
category: js
---

자바스크립트에서의 핵씸!개념인 스코프, 호이스팅, 변수선언 에 대해 키워드별로 정리, 주요 내용들을 작성해보았다. 이 개념들은 코드 실행 동작과 변수의 유효 범위를 이해하는데 있어서 매우 중요하기 때문에 나만의 정리 방법으로 잘 정리해놓고, 많이많이 상기하며 내용 추가할 예정이다.

### 스코프 (Scope)

`스코프란?` : 변수나 함수의 유효 범위. 어떤 부분에서 변수나 함수에 접근할 수 있는지를 결정한다.

`스코프의 종류` : 전역 스코프, 지역 스코프

- **전역 스코프** : 언제 어디서나 접근이 가능한 범위
- **지역 스코프** : 특정 함수나 블록 내에서만 접근 가능한 범위

`지역 스코프의 종류 : 블록레벨 스코프 vs 함수레벨 스코프`

- **함수 레벨 스코프**
  - 함수를 실행할 때 생겨나는 지역 스코프
  - 해당 함수 내에서만 유효한 범위를 가지는 것을 말한다.
  - 함수 내에서 선언된 변수는 함수 외부에서 접근할 수 없다.
  - var
- **블록 레벨 스코프**
  - 대부분의 프로그래밍 언어
  - 반복문, 조건문, 등등
  - 코드 블록에 의해 생성되는 스코프
  - 해당 블록 내에서만 접근 가능하며, 외부에서는 참조할 수 없다.
  - 이로인해 변수 이름의 충돌을 방지하고, 코드의 가독성을 높일 수 있다.
  - let, const

`스코프 체이닝`

- 변수를 참조하는 코드를 만나게 됐을때
- 먼저 해당하는 블록 스코프 내에서 변수를 참조하고자 시도한다.
- 없다면? 상위 스코프로 올라가 다시 탐색을 진행한다.
- ✅ 스코프를 타고타고 올라가서 해당 변수가 존재하는지 찾아가는 과정

### 변수 선언

`변수선언 3단계`

- 선언 단계 : 선언한 변수를 식별자가 담기는 객체에 할당하는 단계
- 초기화 단계 : 변수에 할당할 메모리 공간을 부여하는 단계
- 할당 단계 : 정의된 변수에 데이터가 할당되는 단계

### 호이스팅 (Hoisting)

`호이스팅이란?` : 변수 및 함수 선언이 스코프의 최상단으로 끌어올려지는 현상.

- 이로 인해 변수는 선언 위치보다 앞에서 사용될 수 있다.

`변수 호이스팅과 함수 호이스팅`

- 변수 호이스팅
  - var 키워드로 선언한 변수의 호이스팅
    - 선언부만 끌어올려진다.
    - 초기화나 할당부분은 호이스팅되지 않고 `undefined`로 초기화 된다. (암묵적)
  - let, const 키워드로 선언한 변수의 호이스팅
    - 호이스팅이 발생은 한다.
    - TDZ가 존재하기 때문에, 초기화 전에 변수에 접근하려면 에러가 발생한다. ReferenceError

```jsx
console.log(myVar); // undefined (var)
var myVar = 10;

console.log(myLetVar); // ReferenceError (let)
let myLetVar = 20;

console.log(myConstVar); // ReferenceError (const)
const myConstVar = 30;
```

- 함수 호이스팅
  - 함수 선언문 : 함수 전체가 끌어올려지므로 함수를 선언하기 전에 호출할 수 있다.
  - 함수 표현식 : 변수 선언 부분만 호이스팅되며, 함수 객체가 할당되는 부분은 할당되지 않는다.

```jsx
// 함수 선언문
fn1(); // hoisting occured
function fn1() {
  console.log("hoisting occured");
}

// 함수 표현식
fn2(); // Uncaught ReferenceError: fn2 is not defined
const fn2 = () => {
  console.log("error occured");
};
```

`호이스팅으로 인한 주의점`

- 호이스팅은 코드의 실행 순서와는 다른 동작을 보이기 때문에 주의가 필요하다.
- 변수나 함수를 선언하기 전에 사용하면 예상치 못한 결과가 발생할 수 있다.
- ✅ 그렇기 때문에 이를 미연에 방지할 수 있게 변수선언은 let, const 키워드 사용 , 함수는 표현식으로 선언하도록 하자!

### 📍 요약

✔️ 호이스팅은 변수와 함수 선언을 해당 스코프의 최상단으로 끌어올리는 개념이다.

✔️ var 키워드로 선언한 변수는 선언과 초기화가 함께 호이스팅되지만, let, const 로 선언한 변수는 TDZ로 인해 초기화 전에 접근 시 에러가 발생한다.

✔️ 함수 선언식은 전체가 호이스팅되고 함수 표현식은 변수 선언만 끌어올려진다.

### var 사용을 지양해야 하는 이유

- var 로 선언한 변수는 호이스팅으로 인해 선언과 초기화가 동시에 이루어진다. 따라서 선언 이전에 변수에 접근할 때 값이 undefined로 초기화되어 예상치 못한 동작이 발생할 수 있다. (안정성 문제)
- var 로 선언한 변수는 함수 레벨 스코프를 가지게 된다. 따라서 함수 외의 코드블럭 내에서 선언한 변수가 외부로 유출될 수 있다. 이는 코드의 예측 불가능성을 높일 수 있다.
