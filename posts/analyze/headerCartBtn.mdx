---
title: ì½”ë“œë¶„ì„ | HeaderCartBtn ì»´í¬ë„ŒíŠ¸ ë¶„ì„
date: 2023-12-21
description: ë¦¬ì—‘íŠ¸, food-order-app í”„ë¡œì íŠ¸ ìŠ¤í„°ë”” ì¤‘ ì½”ë“œë¶„ì„
category: analyze
---

```jsx
import React, { useContext, useEffect, useState } from "react";
import CartIcon from "../Cart/CartIcon";
import CartContext from "../../store/cart-context";

import classes from "./HeaderCartButton.module.css";

const HeaderCartButton = (props) => {
  const [btnIsHighlighted, setBtnIsHighlighed] = useState(false);
  const cartCtx = useContext(CartContext);

  const { items } = cartCtx;

  const numberOfCartItems = items.reduce((curNumber, item) => {
    return curNumber + item.amount;
  }, 0);

  const btnClasses = `${classes.button} ${
    btnIsHighlighted ? classes.bump : ""
  }`;
  useEffect(() => {
    if (items.length === 0) {
      return;
    }
    setBtnIsHighlighed(true);

    const timer = setTimeout(() => {
      setBtnIsHighlighed(false);
    }, 300);

    return () => {
      clearTimeout(timer);
    };
  }, [items]);
  return (
    <button className={btnClasses} onClick={props.onClick}>
      <span className={classes.icon}>
        <CartIcon />
      </span>
      <span>Your Cart</span>
      <span className={classes.badge}>{numberOfCartItems}</span>
    </button>
  );
};

export default HeaderCartButton;
```

1. state ê´€ë¦¬

```jsx
const [btnIsHighlighted, setBtnIsHighlighed] = useState(false);
```

1. context ì‚¬ìš©

```jsx
const cartCtx = useContext(CartContext);
const { items } = cartCtx;
```

1. bedge ì— ë“¤ì–´ê°€ëŠ” ìˆ«ìžëŠ”?

```jsx
const numberOfCartItems = items.reduce((curNumber, item) => {
  return curNumber + item.amount;
}, 0);
```

1. btn ì— ìƒë™ê° ë”í•˜ê¸°!

- ë²„íŠ¼ì˜ í´ëž˜ìŠ¤ë¥¼ ì¡°ê±´ë¶€ë¡œ ìƒì„±í•œë‹¤.
- btnIsHighlighedê°€ true ë©´, bump (ì• ë‹ˆë©”ì´ì…˜ í´ëž˜ìŠ¤)ë¥¼ ì¶”ê°€í•œë‹¤.

1. useEffectë¥¼ ì´ìš©í•˜ì—¬ ìœ„ì˜ ìƒë™ê° êµ¬í˜„í•˜ê¸°

- useEffectëŠ” CartContextì˜ items ë°°ì—´ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ íŠ¸ë¦¬ê±°ëœë‹¤.
- items.lengthê°€ 0ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ btnIsHighlightedë¥¼ trueë¡œ ì„¤ì •í•˜ì—¬, ë²„íŠ¼ì— ì‹œê°ì ì¸ ê°•ì¡° íš¨ê³¼ë¥¼ ë¶€ì—¬í•œë‹¤.
- 300 ë°€ë¦¬ì´ˆ í›„ì— ë‹¤ì‹œ falseë¡œ ì„¤ì •í•˜ê³  (setTimeout),
- ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ ë˜ê±°ë‚˜, 300ë°€ë¦¬ì´ˆê°€ ì§€ë‚˜ê¸° ì „ì— itemsê°€ ë³€ê²½ë˜ë©´ íƒ€ì´ë¨¸ë¥¼ clear í•œë‹¤.

### ðŸ§Â useEffectì˜ defendency ì— [cartCtx.items] ê°€ ì•„ë‹Œ, destructuring í•œ itemsë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ”?

- useEffectì˜ dependency arrayì— ë“¤ì–´ê°€ëŠ” ê°’ì´ ë³€ê²½ë ë•Œë§ˆë‹¤ useEffectê°€ ì‹¤í–‰ëœë‹¤.
- ë§Œì•½, dependency arrayì— `cartCtx.items`ë¥¼ ì§ì ‘ ì‚¬ìš© í–ˆë‹¤ë©´, `cartCtx.items` ê°€ **ê°ì²´ì°¸ì¡°**ì´ê¸° ë•Œë¬¸ì— ë°°ì—´ ë‚´ìš©ì´ ë³€ê²½ë˜ë”ë¼ë„ ì°¸ì¡°ëŠ” ë³€ê²½ë˜ì§€ ì•Šì„ ìˆ˜ ìžˆë‹¤.
- ReactëŠ” === ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ë¹„êµí•˜ë¯€ë¡œ ì°¸ì¡°ê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ useEffectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•Šì„ ìˆ˜ ìžˆë‹¤.

### ðŸ¤“Â array method `reduce`

```jsx
const numberOfCartItems = items.reduce((curNumber, item) => {
  return curNumber + item.amount;
}, 0);
```

![analyze_01_01](/images/blog/analyze_01_01.png)
